#### 불연속 메모리 관리

프로그램의 일부가 서로 다른 주소에 할당될 수 있는 기법입니다. 앞서 설명한 단편화 문제를 해결하기 위해서 제시된 기법 입니다.

내부 단편화의 해소를 위해서는 Segmentation 이 외부 단편화를 해소하기 위해서 Paging 이 소개됩니다.

[관련 단어]
- Page 페이지 : 작은 고정 사이즈의 프로세스 조각
- Frame 프레임 : 페이지와 크기가 같은 주 기억장치 메모리 조각
- Page Table 페이지 테이블 : 프로세스의 각 페이지에 해당하는 프레임 위치를 관리
- Segment 세그먼트 : 서로 다른 크기를 가지는 논리적인 블록이 연속적인 공간에 배치되어 있는것
  
-----
### Paging (페이징) 
----- 
![11](https://github.com/Nomad-CS-STUDY/CS_STUDY/assets/71619429/863e0aba-3daf-48dd-bcf1-dd2df1224db4)

프로세스를 일정한 크기의 페이지로 분할하여 메모리에 적재하는 방식입니다. 

- 페이지: 고정 사이즈의 가상 메모리 내의 프로세스 조각
- 프레임: 페이지 크기와 같은 주 기억장치의 메모리 조각

하나의 프로세스가 사용하는 메모리 공간이 연속적이여야 한다는 제약을 없애는 메모리 관리 방법입니다.

**페이징 테이블**
 
![2](https://github.com/Nomad-CS-STUDY/CS_STUDY/assets/71619429/f188e8c5-7878-4e35-83b0-746a6684fa79)

- 물리 메모리는 고정 크기의 프레임 이고, 가상 메모리는 고정 크기의 페이지로 분리되어 있습니다.
- 개별 페이지는 순서에 상관없이 물리 메모리에 있는 프레임에 매핑되어 저장 됩니다.
- 모든 프로세스는 하나의 페이징 테이블을 가지고 있고, 메인 메모리에 적재되어 있는 페이지 번호와 해당 페이지가 위치한 메인 메모리의 시작 주소가 있습니다.
 이를 통해 하나의 프로세스를 나눈 가상 메모리 페이지들이 각각 실제 메인 메모리의 프레임 위치를 알아낼 수 있습니다.

![3](https://github.com/Nomad-CS-STUDY/CS_STUDY/assets/71619429/ab037e02-61ae-4ffb-b060-dd1c9833ef95)


&rarr; 위의 페이징 테이블에서는 P1프로세스의 0번째 페이지가 메인 메모리의 5번째 프레임에 있는 것을 알 수 있습니다. 이 방식으로 페이징 테이블을 해석하면 됩니다. 

페이징 테이블에서는 메모리 관리 장치 (MMU, Memory Management Unit) 는 논리주소를 이용해 실제 데이터가 담겨있는 주소로 변환해 줍니다.

MMU에 대해서는 Memory Management Unit.md에서 이어집니다. 

**페이징의 장단점**
- 장점 : 논리 메모리는 물리 메모리에 저장될 때 연속되어 저장될 필요가 없고, 물리 메모리의 남는 프레임에 적절히 배치되기 때문에 외부 단편화가 생기지 않습니다.
- 단점 : 내부 단편화 문제가 발생할 수 있습니다. 페이지 단위를 작게 하면 해결할 수 있지만, 페이지 매핑 과정이 복잡해져 오히려 비효율적일수 있습니다.

-----
### Segmentation (세그멘테이션) 
-----

![22](https://github.com/Nomad-CS-STUDY/CS_STUDY/assets/71619429/7b30396a-d8c0-4b9b-b80c-a3ef4635025c)

- 가상 메모리를 서로 크기가 다른 논리적 단위로 분할한 것을 의미합니다. 
- 프로세스를 물리적 단위가 아닌 논리적 단위인 세그먼트로 분할해서 메모리에 적재하는 방식입니다.
- Segment는 의미가 같지 않은 논리적 내용을 기준으로 프로그램을 분할하기 때문에 크기가 같지 않습니다.
- 페이징과 마찬가지로 Mapping을 위한 segment table이 필요합니다

  하지만 프로세스가 필요한 메모리 공간만큼 메모리를 할당해주기 때문에 내부 단편화 문제는 발생하지 않지만, 중간에 메모리를 해제하면 외부 단편화 문제가 발생하게 됩니다.

---
**Paging vs Segmentation**
- Paging은 고정 크기를 가짐
- Segmentation은 가변 크기를 가짐
- Paging은 내부 단편화 발생 가능, Segmentation은 외부 단편화 발생 가능

